let resizer=function(){"use strict";if("undefined"==typeof config||!config)return console.error("ERROR: unable to load config.js"),null;let e,t,n,i,o,r,l,a,g,d,f,c,s,u,h,p=!1,y=[],w=0;function m(){const p=window.devicePixelRatio||1;let m,v;if(d){if(o=parseFloat(window.getComputedStyle(g).getPropertyValue("padding-left")),r=parseFloat(window.getComputedStyle(g).getPropertyValue("padding-right")),l=parseFloat(window.getComputedStyle(g).getPropertyValue("padding-top")),a=parseFloat(window.getComputedStyle(g).getPropertyValue("padding-bottom")),n=g.clientHeight-(l+a),i=g.clientWidth-(o+r),h="both"===config.orientation?window.innerWidth>=window.innerHeight?"landscape":"portrait":config.orientation,config.stretchToFit?(c=n,s=i):"portrait"===h?(u="fitWidth",m=config.gameFieldWidth/config.gameFieldHeight,s=(c=n)*m,Math.floor(s)>i&&(u="fitHeight",m=config.gameFieldHeight/config.gameFieldWidth,c=(s=i)*m)):(u="fitHeight",m=config.gameFieldHeight/config.gameFieldWidth,c=(s=i)*m,Math.floor(c)>n&&(u="fitWidth",m=config.gameFieldWidth/config.gameFieldHeight,s=(c=n)*m)),s=Math.round(s),c=Math.round(c),f)f.style.width=s+"px",f.style.height=c+"px";else if(d)for(v=0;v<d.length;v++)d[v].style.width=s+"px",d[v].style.height=c+"px";if(config.scaleByDPR&&d){for(v=0;v<d.length;v++)d[v].width=Math.round(d[v].width*p),d[v].height=Math.round(d[v].height*p);for(v=0;v<t.length;v++)t[v].scale(p,p)}!function(){let e,t,u,h,p,y,w=config.canvasPosition.split(" ");"absolute"===window.getComputedStyle(g).getPropertyValue("position")?(u=document.body.getBoundingClientRect(),h=g.getBoundingClientRect(),p=h.left-u.left,y=h.top-u.top):(p=0,y=0);f?t=[f]:d&&(t=d);for(e=0;e<t.length;e++){switch(w[0]){default:case"center":t[e].style.top=Math.round(y+l+(n/2-c/2))+"px";break;case"top":t[e].style.top=Math.round(y+l)+"px";break;case"bottom":t[e].style.top=Math.round(y+g.clientHeight-c-a)+"px"}switch(w[1]){default:case"center":t[e].style.left=Math.round(p+o+(i/2-s/2))+"px";break;case"left":t[e].style.left=Math.round(p+o)+"px";break;case"right":t[e].style.left=Math.round(p+g.clientWidth-s-r)+"px"}}}(),e=d[0].getBoundingClientRect()}for(v=0;v<w;v++)y[v]()}return{init:function(){let e;if(p)return console.error("ERROR: resizer already initialized."),!1;if(p=!0,g=document.getElementById(config.containerId),""!==config.canvasId){if(d=[],t=[],Array.isArray(config.canvasId))for(e=0;e<config.canvasId.length;e++){let t=document.getElementById(config.canvasId[e]);t?d.push(t):console.error("ERROR: canvas '"+config.canvasId[e]+"' not found")}else d.push(document.getElementById(config.canvasId)),t.push(d[0].getContext("2d"));for(s=config.gameFieldWidth,c=config.gameFieldHeight,e=0;e<d.length;e++)d[e].width=s,d[e].height=c;if(""!==config.wrapperId){for(f=document.getElementById(config.wrapperId),e=0;e<d.length;e++)d[e].style.width="100%",d[e].style.height="100%";f.style.position="absolute"}else f=null;for(e=0;e<d.length;e++)d[e].style.position="absolute",d[e].style.position="absolute"}return config.resizeDelay>0?window.addEventListener("resize",function(e,t,n){let i;return function(){let o=this,r=arguments,l=n&&!i;clearTimeout(i),i=window.setTimeout(function(){i=null,n||e.apply(o,r)},t),l&&e.apply(o,r)}}(m,config.resizeDelay,!1),!1):window.addEventListener("resize",m,!1),m(),!0},resize:m,getOrientation:function(){return h},getSizeMode:function(){return u},getCanvas:function(){return d.length>1?d:1===d.length?d[0]:(console.error("ERROR: canvas has been set to false in config.js"),null)},getContainer:function(){return g},getGameHeight:function(){return config.gameFieldHeight},getGameWidth:function(){return config.gameFieldWidth},getCanvasWidth:function(){return s},getCanvasHeight:function(){return c},getCanvasBoundingRect:function(){return e},addResizeEvent:function(e){return!!e&&(y.push(e),w++,!0)},removeResizeEvent:function(e){let t=0;if(!e)return!1;for(;y[t]!==e&&t<w;)t++;return t<w&&(y[t]=y[y.length-1],y[y.length-1]=void 0,y.length=y.length-1),w--,!0},getRelativeEventCoords:function(e,t){void 0===t&&(t=d[0]);let n=s/t.width;return{x:(e.pageX-function(e){let t=0;do{isNaN(e.offsetLeft)||(t+=e.offsetLeft),e=e.offsetParent}while(null!==e);return t}(t))/n,y:(e.pageY-function(e){let t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop),e=e.offsetParent}while(null!==e);return t}(t))/n}}}}();